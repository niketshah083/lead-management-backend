import { OnModuleInit, OnModuleDestroy } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { Repository } from 'typeorm';
import { Message as SQSMessage } from '@aws-sdk/client-sqs';
import { Lead, Message, Category, User, UserCategory } from '../../entities';
import { AutoReplyService } from '../../auto-reply/auto-reply.service';
import { SlaService } from '../../sla/sla.service';
import { ParsedSqsMessage } from '../interfaces';
import { ChatGateway } from '../gateways/chat.gateway';
import { WhatsAppService } from '../../common/services/whatsapp.service';
import { CategoryDetectorService } from './category-detector.service';
export declare class SqsConsumerService implements OnModuleInit, OnModuleDestroy {
    private readonly configService;
    private readonly leadRepository;
    private readonly messageRepository;
    private readonly categoryRepository;
    private readonly userRepository;
    private readonly userCategoryRepository;
    private readonly autoReplyService;
    private readonly slaService;
    private readonly chatGateway;
    private readonly whatsAppService;
    private readonly categoryDetectorService;
    private readonly logger;
    private sqsClient;
    private queueUrl;
    private isPolling;
    private pollInterval;
    constructor(configService: ConfigService, leadRepository: Repository<Lead>, messageRepository: Repository<Message>, categoryRepository: Repository<Category>, userRepository: Repository<User>, userCategoryRepository: Repository<UserCategory>, autoReplyService: AutoReplyService, slaService: SlaService, chatGateway: ChatGateway, whatsAppService: WhatsAppService, categoryDetectorService: CategoryDetectorService);
    onModuleInit(): Promise<void>;
    onModuleDestroy(): void;
    startPolling(): void;
    stopPolling(): void;
    private poll;
    processMessage(message: SQSMessage): Promise<void>;
    private handleNewMessage;
    private handleCategorySelection;
    private handleFlowResponse;
    private createLead;
    private findAvailableExecutive;
    private storeInboundMessage;
    private logOutboundMessage;
    parseMessage(body: string): ParsedSqsMessage | null;
    private normalizePhoneNumber;
    private deleteMessage;
    isActive(): boolean;
    private notifyEligibleUsers;
}
